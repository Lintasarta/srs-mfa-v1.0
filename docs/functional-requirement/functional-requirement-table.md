# Functional Requirement Table

| ID        | Functional Requirement | Description |
|-----------|-------------------------|-------------|
| MFA-SA-001 | Super Admin Mandatory MFA Enforcement & Login | The system SHALL enforce MFA as a mandatory step for all Super Admin logins to the ai.cloudeka.id service portal. Upon successful initial credential verification, the system SHALL prompt for a 6-digit Time-Based One-Time Password (TOTP). The system SHALL allow a Super Admin to successfully log in with a valid TOTP code. If an invalid TOTP is provided, the system SHALL prevent login and display "Invalid or expired OTP". The system SHALL also allow Super Admins to use email authentication as a fallback. |
| MFA-SA-002 | Super Admin Management of User Admin MFA (Activation) | The system SHALL enable Super Admins to activate MFA for a specific User Admin account via the "Manage Organization > More > Detail" menu. Upon activation, the system SHALL ensure that the User Admin's next login requires MFA enforcement. The system SHALL persist the MFA activation status for the User Admin account. |
| MFA-SA-003 | Super Admin Management of User Admin MFA (Deactivation) | The system SHALL enable Super Admins to deactivate MFA for a specific User Admin account via the "Manage Organization > More > Detail" menu. Upon deactivation, the system SHALL ensure that the User Admin's next login will prompt for TOTP/Email Auth verification if previously enrolled, or revert to standard login. The system SHALL persist the MFA deactivation status for the User Admin account. |
| MFA-SA-004 | Super Admin Limitation on User Admin MFA Management | The system SHALL NOT allow Super Admins to activate or deactivate MFA for User Admins via the "Manage User" menu. The Multi-Factor Authentication button SHALL be disabled or unavailable in the "Manage User" context. |
| MFA-SA-005 | Super Admin Enroll New MFA Code | The system SHALL allow Super Admins to enroll a new MFA code via the "My Profile" tab. This process SHALL require inputting a valid email and password for confirmation. The system SHALL generate and display a QR Code or provide a Setup Key for authenticator app configuration. Users SHALL then input a valid security code for verification. Upon successful enrollment, the system SHALL display "A New Multi-Factor Authentication has been successfully enrolled." If an invalid security code is entered, the system SHALL display "Invalid authentication code. Make sure the code is correct and not expired." |
| MFA-UA-001 | User Admin Optional MFA Activation & Login | The system SHALL allow User Admins to optionally activate Multi-Factor Authentication for their accounts via the "My Profile" tab. Upon activation, User Admin logins SHALL prompt for a 6-digit TOTP. The system SHALL allow a User Admin to successfully log in with a valid TOTP code. If an invalid TOTP is provided, the system SHALL prevent login and display "Invalid or expired OTP". The system SHALL also allow User Admins to use email authentication as a fallback. |
| MFA-UA-002 | User Admin Self-Service MFA Management (Activation/Deactivation/Enroll New Code & Recovery) | The system SHALL provide User Admins with a slider in their "My Profile" tab to initiate MFA activation, deactivation, or enrollment of a new MFA code. This process SHALL require inputting a valid email and password for confirmation. The system SHALL generate and display a QR Code or provide a Setup Key for authenticator app configuration. Users SHALL then input a valid security code for verification. Upon successful activation, the system SHALL update the MFA status to 'Active'. If an invalid security code is entered, the system SHALL display "Invalid authentication code. Make sure the code is correct and not expired.". The same process is used for MFA reset or recovery. |
| MFA-UA-003 | User Admin Password Confirmation for MFA Changes | The system SHALL require User Admins to input their valid email and password before proceeding with any MFA activation, deactivation, or new code enrollment processes within their "My Profile". |
